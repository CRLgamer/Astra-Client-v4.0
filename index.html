<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8" />
	<meta name="viewport" content="width=device-width, initial-scale=1.0" />
	<meta name="description" content="Resent 1.8" />
	<meta name="keywords" content="eaglercraft, eaglercraftx, minecraft, 1.8, 1.8.8, resent, hooman, kone, nitwit, lax1dude" />
	<title>Resent Client v5.0</title>
	<meta property="og:locale" content="en-US" />
	<meta property="og:type" content="website" />
	<meta property="og:title" content="Resent 1.8" />
	<meta property="og:description" content="Resent 1.8" />
	<link type="image/png" rel="shortcut icon" href="favicon.png" id="favicon" />

	<!-- Corrected fallback font loading -->
	<style>
		@font-face {
			font-family: Aller;
			src: local("Arial");
		}
		html {
			font-family: sans-serif;
			text-align: center;
		}

		* {
			-webkit-tap-highlight-color: transparent;
			user-select: none;
			-webkit-user-select: none;
			margin: 0;
			padding: 0;
			box-sizing: border-box;
		}

		body {
			overflow: hidden;
		}

		#dividk {
			background-image: url('https://i.imgur.com/JYlZazO.png');
			background-size: cover;
			background-position: center;
			background-repeat: no-repeat;
			position: fixed;
			top: 0;
			left: 0;
			width: 100vw;
			height: 100vh;
			z-index: -1;
		}

		#clienttitle {
			position: relative;
			top: 25vh;
			font-size: 8vw;
			font-family: Aller;
			color: white;
			transition: all 0.4s;
			z-index: 1;
		}

		#clientversion {
			position: absolute;
			top: 31vh;
			left: 74vw;
			font-size: 2.5vw;
			color: gray;
			font-family: Aller;
			transition: all 0.4s;
			z-index: 1;
		}

		#progresstext {
			position: relative;
			top: 30vh;
			font-weight: bold;
			font-size: 1.75vw;
			color: white;
			transition: all 0.4s;
			z-index: 1;
		}

		.ratio {
			position: relative;
			top: 13vh;
			font-size: 2vh;
			font-family: Aller;
			color: white;
			opacity: 0;
			transition: opacity 0.4s;
			z-index: 1;
		}

		.ratio.show {
			opacity: 1;
		}

		#meter {
			width: 80vw;
			margin: auto;
			top: 28vh;
			height: 20px;
			position: relative;
			border: 5px solid white;
			border-radius: 20vw;
			z-index: 1;
		}

		#progress {
			width: 10%;
			height: 100%;
			border-radius: 10vw;
			background-color: white;
			transition: all 0.5s;
			transform: scaleX(1.01);
		}

		#mojang {
			position: absolute;
			left: 50vw;
			top: 35vh;
			width: 50vw;
			filter: invert(100%);
			transform: translate(-50%);
			opacity: 0;
			z-index: 10;
			transition: all 0.4s;
		}
	</style>
</head>
<body>
	<div id="dividk"></div>
	<h1 id="clienttitle">Resent Client</h1>
	<p id="clientversion">v5.0</p>
	<p id="progresstext">Initializing...</p>
	<div class="ratio">Ratio Info</div>
	<div id="meter"><div id="progress"></div></div>
	<img id="mojang" src="https://upload.wikimedia.org/wikipedia/commons/3/3a/Mojang2020Logo.svg" alt="Mojang Logo"/>

	<script src="./classes.js"></script>
	<script>
		let versionNum = "v5.0";
		let hasSiteInteractionHappened = false;
		let tooLate = false;
		let patchNumber;

		if (localStorage.getItem("isTabSettingsModEnabled") == null) {
			localStorage.setItem("isTabSettingsModEnabled", "false");
		}

		if (localStorage.getItem("isTabSettingsModEnabled") === "true") {
			document.title = localStorage.getItem("tabTitle") || "Resent Client";
			document.getElementById("favicon").href = localStorage.getItem("imageBase64") || "favicon.png";
		}

		document.addEventListener("click", () => {
			hasSiteInteractionHappened = true;
		});

		window.addEventListener("DOMContentLoaded", () => {
			setTimeout(() => {
				if (!tooLate) {
					document.querySelector(".ratio").classList.add("show");
				}
			}, 2000);
		});

		function setBarProg(event, epkSize) {
			let percent = Math.round((event.loaded / epkSize) * 10000) / 100;
			let progressMB = Math.round(event.loaded / 1024 / 1024);
			let sizeMB = Math.round(epkSize / 1024 / 1024);
			document.getElementById("progress").style.width = (percent + 3.5) + "%";
			document.getElementById("progresstext").innerText = `${percent}% (${progressMB}MB / ${sizeMB}MB)`;
		}

		function enableClick() {
			if (hasSiteInteractionHappened) {
				loading();
				clearInterval(interval);
			}
		}

		let interval;

		function enable() {
			document.getElementById("progresstext").innerText = "Click anywhere to start Resent Client v5.0!";
			document.getElementById("clienttitle").style.top = "3vh";
			document.getElementById("clienttitle").style.fontSize = "10vw";
			document.getElementById("clientversion").style.left = "81vw";
			document.getElementById("clientversion").style.top = "10vh";
			document.getElementById("clientversion").style.fontSize = "3.5vw";
			document.getElementById("progresstext").style.top = "3vh";
			interval = setInterval(enableClick, 10);
		}

		function loading() {
			document.getElementById("clienttitle").style.fontSize = "8vw";
			document.getElementById("clienttitle").style.top = "25vh";
			document.getElementById("clientversion").style.left = "74vw";
			document.getElementById("clientversion").style.top = "31vh";
			document.getElementById("clientversion").style.fontSize = "2.5vw";
			document.getElementById("progresstext").style.top = "30vh";
			document.getElementById("progresstext").innerText = "Loading Resent " + versionNum;
		}

		function showMojang() {
			document.getElementById("dividk").style.backgroundColor = "#f0323e";
			document.getElementById("clienttitle").style.opacity = "0";
			document.getElementById("clientversion").style.opacity = "0";
			document.getElementById("mojang").style.opacity = "1";
			document.getElementById("progresstext").style.color = "gray";
		}

		function die2() {
			document.getElementById("progresstext").style.opacity = "0";
			const mojang = document.getElementById("mojang");
			mojang.style.top = "50vh";
			mojang.style.transform = "translate(-50%, -50%)";
			setTimeout(() => {
				mojang.style.width = "135vw";
				document.getElementById("dividk").style.opacity = "0";
				setTimeout(() => {
					document.getElementById("dividk").style.display = "none";
				}, 200);
			}, 500);
		}
	</script>
</body>
</html>
